<!DOCTYPE HTML>
<html>
<head>
<title>Title Test</title>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />

 
<link rel="stylesheet" href="css/themes/events-theme.css" /> 
<link rel="stylesheet" href="jquery.mobile/jquery.mobile-1.1.1.min.css" />

<script src="jquery.mobile/jquery-1.7.2.min"></script>
<script src="custom/jQueryMobile/jQuery-mobile-init.js"></script>
<script src="jquery.mobile/jquery.mobile-1.1.1.min.js"></script>
<script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>


<script type="text/javascript">
 
 	// *******************************************************************************
	// ****************** Start of definition of JavaScript objects ******************
	// *******************************************************************************
	var AjaxEventHelper = function(){
		//var rootURL = 'http://localhost:8081/EventServiceApp/resources/';
		var rootURL = 'http://localhost/crossDomain/';
		
		errorFunction = function(xhRequest, ErrorText, thrownError){
			console.log('xhRequest: ' + xhRequest.responseText);
			console.log('ErrorText: ' + ErrorText);
			console.log("thrownError: "  + thrownError);
			$.mobile.hidePageLoadingMsg();
			$('.console').html('Error conecting to webservice');
			alert('Error conecting to requested web Service ..check log console');
		}
		
		return {
			getRootURL : function(event){
				return rootURL;
			}, 
			createGETRequestAjax : function(url, callbackfuntion){
				console.log(url);
				//Starting loading animation        
				$.mobile.showPageLoadingMsg();
					
				$.ajax({
			        type: 'GET',
			        url: url,
			        dataType: 'json', // data type of response
			        success: callbackfuntion,
			        error: errorFunction,
					statusCode: {
					    404: function() {
					      alert("page not found");
					    }
					}
			    }).then(function(){
					//cue the page loader   
			    	$.mobile.hidePageLoadingMsg();
			    });
			},
			createPOSTRequestAjax : function(url, callbackfuntion, dataToBePosted){
				console.log(url);
				$.ajax({
			        type: 'POST',
			        url: url,
			        contentType: "application/json; charset=utf-8",
			        dataType: 'json', // data type of response  try jsonp
			        data:dataToBePosted,// JSON.stringify({username:"test", password:"data"}),//{ username: "John", password: "2pm" } , //dataToBePosted,// jsonData:   dsfsdkfsld
			        success: callbackfuntion,
			        error: errorFunction,
					statusCode: {
					    404: function() {
					      alert("page not found");
					    }
					 }
			    });
			} 
			
		}
	}(); 
	
 	
	
	// **************************************************************************************************
	// ********************************** Event Singleton application ***********************************
	// **************************************************************************************************
	// creation of a singleton object (as advised in mobile javascript mobile development book)
	// One of the ideas is to create a singleton object that will maintain application state.
	// When we add html5 offline support all the caching mechanism will be placed in this object 
	var EventListApp = function () { 
		var list;
		
		return {
			init : function() {
				list = new Array();
			},
			clear : function(){
				list = [];
			},
			size : function(){
				return list.length;
			},
			addEvent : function(event){
				list.push(event);
			}, 
			findEventsInEventList : function (eventId){
				console.log("findEventsInEventList: " + eventId);
				//This should be replaced by cache mechanisms ... until then :)
				for(i=0;i < list.length; i++){
			  		var event = list[i];
			  		if(event && event.id === eventId) 
			  			return event;
				};
			}, 
			findEventsInEventListByCity : function (cityId) {
				console.log("findEventsInEventListByCity: " + cityId);
				//This should be replaced by cache mechanisms ... until then :)
				var eventsByCity = new Array();
				var event;
				for(i=0;i < list.length; i++){
					event = list[i];
			  		if(event && event.venue.location.city === cityId)
			  			eventsByCity.push(event);
				}
				return eventsByCity;
			}
		}
	}(); // for what I read what makes it singleton are these last '()' !?!?? strange .. ah
	
	
	// ********************************************************
	// *************** Javascript Artist object ***************
	// ******************************************************** 
	EventListApp.Artist = function (id, artist){
		this.id = id;
		this.artist = artist;
	}
	// adding methods to Artist Object
	// create method toString    
	EventListApp.Artist.prototype.toString  = function(){
		return '[id:' + this.id + ' ,artist: '+ this.artist + ']';
	}

	// ************************************************************ 
	// ***************** Javascript Location object *************** 
	// ************************************************************
	EventListApp.Location = function ( city, country, street, postalCode, latitude, longitude){
		this.city = city;
		this.country = country;
		this.street = street;
		this.postalCode = postalCode;
		this.latitude = latitude;
		this.longitude = longitude;
	}
	// adding methods to Location Object
	// create method toString    
	EventListApp.Location.prototype.toString  = function(){
		return '[id:' + this.id + ' ,city: '+ this.city + ' ,country: ' + this.country + ' ,street:' + this.street 
					+ ' ,postalCode:' + this.postalCode +' ,latitude:' + this.latitude +' ,longitude:' + this.longitude + ']';
	}


	// ********************************************************************
	// ********************** Javascript Venue object *********************
	// ********************************************************************
	EventListApp.Venue = function (id,name, location, website,phoneNumber, image){
		this.id = id;
		this.name = name;
		this.location = location;
		this.website = website;
		this.phoneNumber = phoneNumber;
		this.image = image;
	}
	
	// adding methods to Venue Object
	// create method toString    
	EventListApp.Venue.prototype.toString  = function(){
		return '[id:' + this.id + ' , name:' + this.name + ' , location: '+ this.location.toString() + ' ,website: ' + this.website 
					+ ' ,phoneNumber:' + this.phoneNumber + ' ,image:' + this.image + ']';
	}
	
	
	// *********************************************************************
	// ********************** Javascript Event object **********************
	// *********************************************************************
	// javascript Event object associated with our global singleton object
	// This object will be the main javascript object for events 	
	EventListApp.Event = function (id, title, startDate, description, image, attendance,  price, tag, owner, processDate, url, artist, venue){
		this.id = id;
		this.title = title;
		this.startDate = startDate;
		this.description = description;
		this.image = image;
		this.attendance = attendance;
		this.price = price;
		this.tag = tag;
		this.owner = owner;
		this.processDate = processDate;
		this.url = url;
		this.artist = artist;
		this.venue = venue;
	};

	// adding methods to Event Object
	// create method toString (doing like this is not defined in the global namespace). It belong to the class and aren't created everytime an object is created.   
	EventListApp.Event.prototype.toString  = function(){
		return '[id:' + this.id + ' ,title: '+ this.title + ' ,startDate: ' + this.startDate + ' ,description:' + this.description + 
					' ,image:' + this.image +' ,attendance:' + this.attendance +' ,price:' + this.price +' ,tag:' + this.tag +
					' ,owner:' + this.owner +' ,processDate:' + this.processDate + ' ,url:' + this.url +' ,artist:' + this.artist.toString() +' ,venue:' + this.venue.toString() +']';
	}
	

	
	// initialize our application singleton
	EventListApp.init();


	// *************************************************************************
	// ************************ Start of jQuery code ***************************
	// *************************************************************************

	$(function(){
		// try to sinalize in the console some events that are fired --- see 181 pro jquery mobile
		$( "#home" ).live( " pagebeforechange pagebeforeload pagebeforecreate pagecreate", function(e, data){
			console.log("Page events are being fired..." + e +  " "+data);
		});
		
	
		// try to create a splashScreen while a app loads
		setTimeout(hideSplash, 1000);
		function hideSplash() {
		  $.mobile.changePage("#home", "fade");
		}
		
		
		// try to load webService info when byNameSearchPage loads		
		$('#byNameSearchPage').live("pageshow", function(){
			// callback funtion invocation
		   init(AjaxEventHelper.getRootURL() + 'events/city');
		});
			
		// load webService info when byLocationSearchPage loads
		$('#byLocationSearchPage').live("pageshow", function(){
			loadCitiesAjax();
		});

		// load webService info when #byDateSearchPage loads
		$('#byDateSearchPage').live("pageshow", function(){
			loadEventsForTodayAjax();
		});

		$('#loginBtn').click(function() {
			//event.preventDefault();
			var url = AjaxEventHelper.getRootURL() + 'users';
			AjaxEventHelper.createPOSTRequestAjax(url, 
												  function(data){
														$('#consoleLoginPage').append("dfsdfsd").append(data);
												  }, 
												  createUserInfoRequest());
					
		});

		// create a event listener for click events  on (#locationSearchList > li ... every li inside locationSearchList)
		// the idea is to try to associate a click event in a way that we create dinamically the next page (events by city page)
	    $("#locationSearchList").on("click", "li", function() {
	    	// fetch the id of li (it was fulfilled with item.city )
		    var city = $(this).attr('id');
		    // fetch the text of li --> to display in the header of next page
		    //var city = $(this).text();
		    // invoke function to create/fulfill new page results
		    //loadEventsByCitiesInMemory( city );
		    loadEventsByCitiesAjax(city)
	    });

	});
	

	// ********************************************************************************
	// ************************ Start of JavaScript functions *************************
	// ********************************************************************************

	// Create a full Event JavaScript Object based on event object returned by restfull ws
	function createEventJSObjectBasedOnJsonAjaxReq(eventJson) {
		var event;
		event = new EventListApp.Event( eventJson.id, eventJson.title, eventJson.startDate, eventJson.description, eventJson.image, eventJson.attendance,  
					  					eventJson.price, eventJson.tag, eventJson.owner, eventJson.processDate, eventJson.url,
				  						new EventListApp.Artist(eventJson.artist.id, eventJson.artist.artist),
				  						new EventListApp.Venue( eventJson.venue.id, 
				  												eventJson.venue.name,
				  						 						new EventListApp.Location(eventJson.venue.location.city,
			  						 							   						  eventJson.venue.location.country,
			  						 							   						  eventJson.venue.location.street,
			  						 							   						  eventJson.venue.location.postalCode,
			  						 							   						  eventJson.venue.location.latitude,
			  						 							   						  eventJson.venue.location.longitude  ),
				  						 eventJson.venue.website,
				  						 eventJson.venue.phoneNumber,
				  						 eventJson.venue.image));
		return event;
	}
	
	
	// Refresh function called whenever the user clicks on refresh button on searchByDate page
	// It should be refactored to be more generic (other pages call it too) or we should create other methods for the other pages  
	function refreshByDate(){
		$(".console").html("Verifying...");
		loadEventsForTodayAjax();
	}
	
	
	function loadEventsForTodayAjax(){
		var d = new Date();
		var curr_date = d.getDate();
		var curr_month = d.getMonth() +1 ; // 0 based
		var curr_year = d.getFullYear(); 
		var date = curr_year  + "/" + curr_month + "/" + curr_date; 
		var url = AjaxEventHelper.getRootURL() + 'events/date?searchDate=' + date;
		
		AjaxEventHelper.createGETRequestAjax(url, function(data){
			var html = '';
			
			//if (!data )
			// validar se existe events .. se n fazer display ao user
			
			$.each(data, function(index, _eventDto) {
				html += '<li data-role="list-divider">' + _eventDto.city + '</li>';
				var list = _eventDto.eventList;
				for(var i = 0; i < list.length ; i++) {	
					var _event = list[i];
					// Create html row for displaying event
					html += createHtmlEventRow(_event);
					eventLocal = createEventJSObjectBasedOnJsonAjaxReq(_event);
					EventListApp.addEvent(eventLocal);
				}
			});
			console.log(html);
	  		$("#eventsForTodaySearchList").html(html);
	  		$("#eventsForTodaySearchList").listview('refresh');
	  		$(".console").html("Data refreshed ..");
	    });
		
	}
	
	


	// Refresh function called whenever the user clicks on refresh button on searchByLocation page
	// It should be refactored to be more generic (other pages call it too) or we should create other methods for the other pages  
	function refreshByLocation(){
		$(".console").html("Verifying...");
		loadCitiesAjax();
	}

	
	
	// utility function that loads cities with events and the number of events per city updating the GUI layer then
	// It is called by refresh function() and when the user opens the search part of the application (search by location) 
	function loadCitiesAjax(){

	    // callback function invocation
	    $(".console").html("Downloading ws data...");
	
	    var eventLocal;
	    var event;
	    // Create WS url
	   
	    // create ws url based on the city id clicked
	    var urlByCity = AjaxEventHelper.getRootURL() + 'events/location/country/pt';
	    // invoke web service
	    AjaxEventHelper.createGETRequestAjax(urlByCity, function(data){
			var html = '';
			$.each(data, function(index, item) {
				html += '<li id="' + item.city+'"><a href="#eventsByCityPage">' + item.city + '<span class=ui-li-count>' + item.nbrEvents + '</span> </a> </li>';
				var list = item.eventList;
				for(var i = 0; i < list.length ; i++) {	
					var _event = list[i];
					eventLocal = createEventJSObjectBasedOnJsonAjaxReq(_event);
					EventListApp.addEvent(eventLocal);
				}
			});
			console.log(html);
	  		$("#locationSearchList").html(html);
	  		$("#locationSearchList").listview('refresh');
	  		$(".console").html("Data refreshed ..");
	    });
		

	}

	
	// function for creating events by city page	
	function loadEventsByCitiesInMemory(city) {
		console.log('city:' + city);
		// create event var
		var event;
		// obtain page reference
		var $page = $("#eventsByCityPage");

		// get header 
		$header = $page.children( ":jqmData(role=header)" );
		// populate header with the name of the city we are selecting
		$header.find( "h1" ).html( city );
		
		// create ws url based on the city id clicked
	    var url = AjaxEventHelper.getRootURL() + 'events/location/' + city;
	    var html = '';
	    var eventListByCity = EventListApp.findEventsInEventListByCity(city);
	    
	    for(var i = 0; i < eventListByCity.length ; i++) {		
	    	var _event = eventListByCity[i];
	    	// Create html row for displaying event
	    	html += createHtmlEventRow(_event);
	        // Create a full Event JavaScript Object based on event object returned by restfull ws
	        event = createEventJSObjectBasedOnJsonAjaxReq(_event);
	        console.log(event.toString());
	        EventListApp.addEvent(event);
		};
		console.log(html);
		$("#eventsByCitySearchList").html(html);
		$("#eventsByCitySearchList").listview('refresh');  
	    
	}
	
	// function for creating events by city page	
	function loadEventsByCitiesAjax(city) {
		console.log('city:' + city);
		// create event var
		var event;
		// obtain page reference
		var $page = $("#eventsByCityPage");

		// get header 
		$header = $page.children( ":jqmData(role=header)" );
		// populate header with the name of the city we are selecting
		$header.find( "h1" ).html( city );
		
		// create ws url based on the city id clicked
	    var url = AjaxEventHelper.getRootURL() + 'events/location/country/pt/city/' + city;
	    
		AjaxEventHelper.createGETRequestAjax(url, function(data){
			
			var html = '';
			$.each(data, function (i, _event) {
				// Create html row for displaying event
				html += createHtmlEventRow(_event);
		        // Create a full Event JavaScript Object based on event object returned by restfull ws
		        event = createEventJSObjectBasedOnJsonAjaxReq(_event);
		        console.log(event.toString());
		        EventListApp.addEvent(event);
			  });
			  console.log(html);
			  $("#eventsByCitySearchList").html(html);
			  $("#eventsByCitySearchList").listview('refresh');  
	    });
		
		
	}
	
	function createHtmlEventRow(_event) {
		var html = '';
		html += '<li ><a href="javascript:loadEventById('+ _event.id +  ')"><img alt="coverArt" src="images/mia.png" /><h3>' + _event.title + '</h3>';
	    html += '<p>' + _event.startDate + '</p>';
	    html += '<p>' + _event.venue.location.city + '</p>';
	    html += '</a></li>';
	    return html;
	}
	
	// utility function that loads event information whenever the user chooses and event - updates the GUI layer then
	function loadEventById(eventId){
		// looks in the singleton object for the event clicked/choosed
		var event = EventListApp.findEventsInEventList(eventId);
		// call function to update GUI with event details
		populateEventPage(event);
	} 

	// This function is used to populate eventDetails page with event information
	// It is called by loadEventById function()
	function populateEventPage(event) {
		// fetch eventDetails page
		var $page = $("#eventDetails");
		
		// fetch page header
		$header = $page.children( ":jqmData(role=header)" );
		// find h1 header and fulfill it with event title 
		$header.find( "h1" ).html( event.title );
		
		// fetch page content
		$content = $page.children( ":jqmData(role=content)" );
		
		// Create event info
		var html = '';
		html += '<p><h1><strong> ' + event.description + '</strong></h1></p>'
		html += '<p><strong> ' + event.artist.artist + '</strong></p>'
		html += '<p>' + event.startDate + '</p>'
		html += '<p><a href="'+ event.url+ '">'+  event.url +'</a></p>'
		
		
		console.log(html);	
		// we reset the eventInfo from previous chosen events
		$content.find( "#eventInfo" ).empty();
		// append the info from the last event	
		$content.find( "#eventInfo" ).append( html );
		
		
		// create venue info
		html = '';
		html += '<p><h1><strong> ' + event.venue.venueName + '</strong></h1></p>'
		html += '<p>' + event.venue.location.street + ' - ' + event.venue.location.country +'</p>'
		html += '<p>' + event.venue.location.postalCode + ' - ' + event.venue.location.city +'</p>'
		html += '<p> lat: ' + event.venue.location.latitude + 'º</p>'
		html += '<p> long:' + event.venue.location.longitude +'º</p>'
		html += '<p><a href="'+ event.venue.website + '">'+  event.venue.website +'</a></p>'
		
		// we reset the venueInfo from previous chosen events
		$content.find( "#venueInfo" ).empty();
		// append the info from the last event venue
		$content.find( "#venueInfo" ).append( html );

		var tel = 'tel:' + event.venue.phoneNumber; 
		$( "#phoneCallButton" ).attr('href', tel);
		
		// We change to the details page
		$.mobile.changePage($("#eventDetails"));
	}
	
	
	function createUserInfoRequest(){
		var username = $('#userLogin').val();	
		var password = $('#passLogin').val();
		// do data validation
		//"username": wineId == "" ? null : wineId,
		var json = JSON.stringify({
			"username": username, 
			"password": password, 
			});
		console.log("json object create: " + json);
		return json;
		
	}
	
		
	// callback function (populates one <li> with the info returned by the webService) 
	// this function will be refactored in some other best way 
	// It was only for testing approaches 
	function init(ws){
		console.log("init");
		$.ajax( {
			type:'get',
			url:ws,
			cache:false,
			datatype:'json',
		   //async: false,
			success:function(data) {
				console.log(data);
				var lang = '';
				$.each(data, function() {
					lang += this['title'] + + "<br/>";
				});
		      	console.log(lang);
				$("#searchEventsList").append('<li><a href="' + "#" + '">' +JSON.stringify(eval(data)) + '</a></li>');
			    $("#searchEventsList").listview('refresh');
			},
			error: function(request,error)  {
				console.log(arguments);
				console.log("error: "  + error);
				$("#searchEventsList").append('<li><a href="' + "#" + '">' +error + '</a></li>');
			    $("#searchEventsList").listview('refresh'); 
			}
		});
	}
	
	
	// ********************************************************************************
	// ********************************************************************************	

</script>

<style type="text/css">

	.splash { 
		align:center;
		background-color: #fff;
		padding: 1000px;
	}
	
	
	/* Navbar text */
	[data-role=navbar] .ui-btn-text {
		font-size: smaller;
	}
	
	.logo {
		margin-top: none;
		display: block;
    	margin-left: auto;
    	margin-right: auto;
	}
	
	.smallLogo {
		margin-bottom: 20px;
	}
	
	[data-role="header"] > h1, .headerMsg {
		color: rgb(119, 149, 252);
		text-align: center;
	}

	.msg{
		margin:0px;
		padding:0px;
	}
	
	#splash {
		background-image: url("images/calendar_128x128.png");
		background-position: center;
		background-attachment: fixed;
		background-repeat: no-repeat;
		text-align: center;
	}
	

	
	
	#eventDetails div[data-role=content]  h1, #eventDetails div[data-role=content]  h2 {
		margin: 0px auto 5px auto;
		font-size: 18px;
	}

	
	
	#eventDetails div[data-role=content]  p {
		margin: 0px auto 5px auto;
		padding-left: 5px;
	}

	#eventInfo , #venueInfo {
		font-size:12px;
	}


	#contact_buttons a{
		color:rgb(63, 41, 39);
	}
	
	#event_info .header{
		font-weight: bold;
	}
	#event_info .detail{
		font-style: italic;
	}

	#eventDetails div[data-role=content]  img {
		width: 80px;
		height: 80px;
		--float : left;
		--padding-right: 50px;
	} 


</style>

</head>

<body>
	
	
	<!-- Splash Screen -->
	<div id="splash" data-role="page" data-theme="a" > 
		<div data-role="content" class="logo" >    	
			<p>	<h2>Welcome to events application!</h2> </p>
				<p class="msg">
					This is a sample application for searching events...
				</p>
		</div>
	</div>


	<!-- Home Page -->
	<div data-role="page" id="home" data-theme="c">
		<div data-role="header">
			<h1>						
			<img alt="Events" src="images/eventsLogo_small_.png" class="logo">
			</h1>
			<a href="#settings" data-icon="gear" class="ui-btn-right">Settings</a>
		</div>

		<div data-role="content" >
			<img alt="Events" src="images/calendar_100x100.png" class="logo">
			<div class="headerMsg" >		
				<p>	<h4>Simple apps to search for fun !!!</h4> </p>
			</div>

			<ul data-role="listview"  data-inset="true">
				<!-- <li data-role="list-divider" data-theme="c">Event application</li> --> 
				<li data-icon="false"> <a href="#loginPage" ><img alt="Log in" src="images/login.png" class="ui-li-icon">Log In</a></li>
				<li data-icon="false"> <a href="#byLocationSearchPage" ><img alt="Events" src="images/_search.png" class="ui-li-icon">Events</a></li>
				<li data-icon="false"> <a href="#genreSearchPage" ><img alt="Sign Up" src="images/add_user.png" class="ui-li-icon">Sign Up</a></li>
				<li data-icon="false"> <a href="#eventDetails" ><img alt="About" src="images/about.png" class="ui-li-icon">About</a></li>
				<li data-icon="false"> <a href="feedback.html" data-rel="dialog"><img alt="Feedback" src="images/feedback.png" class="ui-li-icon">Feedback</a></li>
			</ul>
		</div>
		
		<div data-role="footer" data-position="fixed">
			<h5>@Mobile Applications</h5>
		</div>
	</div>

	
	
	
	<!-- Genre Search Page -->
	<div data-role="page" id="byLocationSearchPage"  data-add-back-btn="true">
		<div data-role="header">
			<h1>Events</h1>
			<a href='javascript:refreshByLocation();' data-icon="refresh" id="refresh" 
					class="ui-btn-right" >Refresh</a>
		</div>

		<div data-role="content">
			<h6><p class="console"></p></h6>
			<ul id="locationSearchList" data-role="listview" data-filter="true" data-filter-placeholder="Search locations ..." >

			</ul>
		</div>

		<div data-role="footer" data-position="fixed">
			<div data-role=navbar>
				<ul>
					<li><a href="#home" data-icon="info">Home</a></li>	
					<li><a href="#byLocationSearchPage" class="ui-btn-active"  data-icon="grid">Location</a></li>
					<li><a href="#byNameSearchPage" data-icon="Name">Name</a></li>
					<li><a href="#" data-icon="info">Nearby</a></li>
					<li><a href="#byDateSearchPage" data-icon="star">Today</a></li>
				</ul> 
			</div>
		</div>
	</div>


	<!-- location Search Page -->
	<div data-role="page" id="eventsByCityPage"  data-add-back-btn="true">
		<div data-role="header">
			<h1></h1>
			<a href='' data-icon="refresh" id="refresh" 
					class="ui-btn-right" >Refresh</a>
		</div>

		<div data-role="content">
			<ul id="eventsByCitySearchList" data-role="listview" data-filter="true" data-filter-placeholder="Search events ...">

			</ul>
		</div>

		<div data-role="footer" data-position="fixed">
			<div data-role=navbar>
				<ul>
					<li><a href="#home" data-icon="home">Home</a></li>	
					<li><a href="#byLocationSearchPage" data-icon="grid">Location</a></li>
					<li><a href="#byNameSearchPage" data-icon="Name">Name</a></li>
					<li><a href="#" data-icon="info">Nearby</a></li>
					<li><a href="#byDateSearchPage" data-icon="star">Today</a></li>
				</ul> 
			</div>
		</div>
	</div>

	<!-- today date Search Page -->
	<div data-role="page" id="byDateSearchPage"  data-add-back-btn="true">
		<div data-role="header">
			<h1>Events</h1>
			<a href='javascript:refreshByDate();' data-icon="refresh" id="refresh" 
					class="ui-btn-right" >Refresh</a>
		</div>

		<div data-role="content">
			<h6><p class="console"></p></h6>
			<ul id="eventsForTodaySearchList" data-role="listview" data-filter="true" data-filter-placeholder="Search events ...">

			</ul>
		</div>

		<div data-role="footer" data-position="fixed">
			<div data-role=navbar>
				<ul>
					<li><a href="#home" data-icon="home">Home</a></li>	
					<li><a href="#byLocationSearchPage" data-icon="grid">Location</a></li>
					<li><a href="#byNameSearchPage" data-icon="Name">Name</a></li>
					<li><a href="#" data-icon="info">Nearby</a></li>
					<li><a href="#byDateSearchPage" class="ui-btn-active" data-icon="star">Today</a></li>
				</ul> 
			</div>
		</div>
	</div>


	
	<!-- By Name Search Page -->
	<div data-role="page" id="byNameSearchPage"  data-add-back-btn="true">
		<div data-role="header">
			<h1>Events</h1>
			<a href='' data-icon="refresh" id="refresh" 
					class="ui-btn-right" >Refresh</a>
		</div>

		<div data-role="content" >
			
			
			<ul id="searchEventsList" data-role="listview" data-filter="true" data-filter-placeholder="Search Events ...">
				<li data-role="list-divider">A</li> 
				<li><a href="#">
						<img src="images/mia.png" />
						<h2>An Event from MIA</h2> 
		    			<p>MIA event</p>
		    		</a>
		    	</li>
				<li data-role="list-divider">B</li> 
				<li data-role="list-divider">D</li> 
		    	<li data-role="list-divider">E</li> 
				<li>
					<a href="#">
						<img src="images/events.png" />
						<h3>Event Item title</h3> 
		    			<p>Event Item overview 2</p>
		    		</a>
		    	</li>
				<li data-role="list-divider">F</li> 
				<li data-role="list-divider">G</li> 
		    	<li data-role="list-divider">H</li> 
			</ul>
		</div>

		<div data-role="footer" data-position="fixed">
			<div data-role=navbar>
			<ul>
		        <li><a href="#home" data-icon="home">Home</a></li>	
				<li><a href="#byLocationSearchPage" data-icon="grid">Location</a></li>
				<li><a href="#byNameSearchPage" class="ui-btn-active" data-icon="Name">Name</a></li>
				<li><a href="#" data-icon="home">Nearby</a></li>
				<li><a href="#byDateSearchPage" data-icon="star">Today</a></li>
      		</ul> 
	    </div>
		</div>

	</div>



	<div data-role="page" id="settings" data-add-back-btn="true">
		<div data-role="header">
			<h1>Events</h1>
			
		</div>

		<div data-role="content">
			<p>Settings</p>
			<label for="updated">Receive updates</label> <select id="updated"
				name="updated" data-role="slider">
				<option value="no">No</option>
				<option value="yes">Yes</option>
			</select>
		</div>

	</div>

	<div data-role="dialog" id="loginPage" data-add-back-btn="true">

		<div data-role="header">
			<h1>Events</h1>
		</div>

		<div data-role="content">
			<h1>Login</h1>
			
			<form id="loginForm" method="post" data-transition="none">

			   <div data-role="fieldcontain">
				 <label for="userLogin">User:</label>
				 <input type="text" name="user" id="userLogin" value="" required="true" />
			   </div>

			   <div data-role="fieldcontain">
				 <label for="passLogin">Password:</label>
				 <input type="password" name="password" id="passLogin" value="" required="true" />
			   </div>
			   
			   <input id="loginBtn" type="submit" value="Login" data-theme="a">
			   <a href="#home" data-role="button">Cancel</a>
			 
			 </form>
			 <div id="consoleLoginPage"></div>
		</div>

		<div data-role="footer">
			<h4>@Mobile Applications</h4>
		</div>


	</div>

	<div id="eventDetails" data-role="page" data-add-back-btn="true">

		<div data-role="header">
			<h1> </h1>
		</div> 
	
		<div data-role="content">
			<div class="ui-grid-a" id="event_info">
				<div id="eventInfo" class="ui-block-a">

				</div>
				<div class="ui-block-b">
					<p><img src="images/mia.png" alt="photo"/></p>
				</div>
			</div><!-- /grid-a -->
			<hr/>
	
			<div class="ui-grid-a" >
				<div id="venueInfo" class="ui-block-a" >
					
				</div>
				<div class="ui-block-b">
					<img src="images/maps_small.png" alt="maps"/>
			    </div>
			</div><!-- /grid-a -->
			<div id="contact_buttons">
				<a href="http://maps.google.com/maps?hl=en&safe=off&q=braga+ferreiros+google+maps&ie=UTF-8&hq=&hnear=0xd24fed6130e97f5:0x7dcd16ff52948be6,Ferreiros,+Portugal&ei=jAhbUKnaEoOGrAfho4DQCQ&ved=0CCAQ8gEwAA"  data-role="button" data-icon="maps"> Find in Google Maps </a>
				<a id="phoneCallButton" href="tel:0388161072"  data-role="button" data-icon="tel"> Call </a>
			</div>
		</div>
	
	</div><!-- /page -->


</body>
</html>