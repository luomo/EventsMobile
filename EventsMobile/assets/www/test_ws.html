<!DOCTYPE HTML>
<html>
<head>
<title>Title Test</title>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />

 
<link rel="stylesheet" href="css/themes/events-theme.css" /> 
<link rel="stylesheet" href="jquery.mobile/jquery.mobile-1.1.1.min.css" />

<script src="jquery.mobile/jquery-1.7.2.min"></script>
<script src="custom/jQueryMobile/jQuery-mobile-init.js"></script>
<script src="jquery.mobile/jquery.mobile-1.1.1.min.js"></script>
<script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>


<script type="text/javascript">
 
	

	$(function(){

		// try to sinalize in the console some events that are fired --- see 181 pro jquery mobile
		$( "#home" ).live( " pagebeforechange pagebeforeload pagebeforecreate pagecreate", function(e, data){
			console.log("Page events are being fired..." + e +  " "+data);
		});
		
		// try to create a splashScreen while a app loads
		setTimeout(hideSplash, 1000);
		function hideSplash() {
		  $.mobile.changePage("#home", "fade");
		}
		
		
		// try to load webService info when searchPage loads		
		$('#searchPage').live("pageinit", function(){
			// callback funtion invocation
		   init();
		});

		// callback funtion (populates one <li> with the info returned by the webService)
		function init(){
			alert("init");
			$.ajax( {
				type:'get',
				url:'http://localhost:8080/EventServiceApp/resources/hello',

				success:function(data) {
					console.log(data);
			      	//alert(data);
					$("#searchEventsList").append('<li><a href="' + "#" + '">' +data + '</a></li>');
				     $("#searchEventsList").listview('refresh');
				},
				error: function(request,error) 
				{
				 console.log(arguments);
				 console.log("error: "  + error);
				 //alert ( " Can't do because: " + error );
				 $("#searchEventsList").append('<li><a href="' + "#" + '">' +error + '</a></li>');
			      
			     $("#searchEventsList").listview('refresh'); 
				}
	
			});
		}

		// this is a override of the function responsable for search in list view .. 
		// this is a dummy redifinition because it has the same code as the original
		// is a first try to have control of the search callback to be able to invoke the rest ws 
		filterFunction = function( text, searchValue ){
				
			  return text.toLowerCase().indexOf( searchValue ) === -1;
		}
		
		$('#searchEventsList').listview( 'option', 'filterCallback', filterFunction);
		
	
		
		
		
	});
</script>

<style type="text/css">

	.splash {
		align:center;
		background-color: #fff;
		padding: 1000px;
	}
	
	.msg {
		align:center;
		padding-left: 50px;
	}
	
	/* Navbar text */
	[data-role=navbar] .ui-btn-text {
	font-size: smaller;
	}
	
	.logo {
		display: block;
    	margin-left: auto;
    	margin-right: auto;
	}
	[data-role="header"] > h1 {
		color: rgb(119, 149, 252);
	}

	
	
</style>

</head>

<body>

	<div data-role="page" data-theme="a" id="splash"> 
    <div class=".splash">
    	<div data-role="content">    	
	        <img src="images/events.png" 
	        	 alt="splash" 
	        	 />
    	</div>
    </div>
</div>


	<div data-role="page" id="home" data-theme="b">
 
		<div data-role="header">
			<img alt="Events" src="images/events.png" class="logo">
			<a href="#logout" data-rel="dialog" data-transition="pop">Log out</a>
			<h1>Events</h1>
			<a href="#settings" data-icon="gear">Settings</a>
		</div>


		<div data-role="content">
			<div style="margin:50px;padding: 20px;text-align: center;">		
				<p>	<h1>Welcome to events application!</h1> </p>
				<p class="msg">
					This is a sample application for searching events...
				</p>
			</div>
			<div class="ui-grid-a">
				<div class="ui-block-a">
					<a href="#searchPage" data-icon="search" data-role="button"
						data-theme="b">Search Events</a>
				</div>
				<div class="ui-block-b">
					<a  href="#help" data-icon="info" data-role="button"
						data-theme="b" >Help</a>
				</div>
				<div class="ui-block-c">
					<a href="#" data-role="button" data-icon="plus"
						data-theme="b" >Feedback</a>
				</div>
				<div class="ui-block-d">
					<a href="http://www.facebook.com/fakeaccount" data-role="button"
						data-theme="b" data-icon="star">About</a>
				</div>
			</div>		
		</div>
		
		<div data-role="footer" data-position="fixed">
			<h4>@Mobile Applications</h4>
		</div>
	</div>



	<div data-role="page" id="searchPage"  data-add-back-btn="true">

		<div data-role="header">
			<h1>Events</h1>
			<a href="#settings" data-icon="gear" class="ui-btn-right">Settings</a>
		</div>


		<div data-role="content">
			<ul id="searchEventsList" data-role="listview" data-filter="true" data-filter-placeholder="Search Events ...">
				<li><a href="#">
						<img src="images/events.png" />
						<h2>a Event Item title</h2> 
		    			<p>Event Item overview</p>
		    			<span class=ui-li-count>3</span>
		    		</a>
		    	</li>
		    	<li data-role="list-divider">E</li> 
				<li>
					<a href="#">
						<img src="images/events.png" class="ui-li-icon"/>
						<h3>Event Item title</h3> 
		    			<p>Event Item overview 2</p>
		    		</a>
		    	</li>
			</ul>
		</div>

		<div data-role="footer" data-position="fixed">
			<div data-role=navbar>
			<ul>
		        <li><a href="#"  data-icon="home">Home</a></li>
		        <li><a href="#" data-icon=info>Help</a></li>
		        <li><a href="#" data-icon=delete>Close</a></li>
      		</ul> 
	    </div>
		</div>

	</div>



	<div data-role="page" id="settings" data-add-back-btn="true">
		<div data-role="header">
			<h1>Events</h1>
			<a href="#settings" data-icon="gear" class="ui-btn-right">Settings</a>
		</div>

		<div data-role="content">
			<p>Settings</p>
			<label for="updated">Receive updates</label> <select id="updated"
				name="updated" data-role="slider">
				<option value="no">No</option>
				<option value="yes">Yes</option>
			</select>
		</div>

	</div>

	<div data-role="page" id="logout" data-add-back-btn="true">

		<div data-role="header">
			<h1>Logout</h1>
		</div>

		<div data-role="content">
			<h2>Are you sure you want to logout?</h2>
			<!-- This will be a normal page loading -->
			<a href="delete-yes.html" data-role="button">Yes, delete</a>
			<!-- This is just a close link -->
			<a href="#page1" data-role="button">Cancel</a>
		</div>

		<div data-role="footer">
			<h4>@Mobile Applications</h4>
		</div>


	</div>

</body>
</body>
</html>